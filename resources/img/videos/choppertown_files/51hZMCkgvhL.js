(function(k){var l=window.AmazonUIPageJS||window.P,m=l._namespace||l.attributeErrors,g=m?m("DigitalVideoCollectionAssets"):l;g.guardFatal?g.guardFatal(k)(g,window):g.execute(function(){k(g,window)})})(function(k,l,m){k.when("A","ready").register("dv-ellipsis",function(g){var h=g.$;return function(){function d(){}d.prototype.convertHeightToLines=function(a){a=Math.round(a/this.lineHeight);return 1>a?1:a};d.prototype.getLineHeight=function(){var a=l.parseFloat(this.$element.css("line-height"));if(a)return a;
a=this.$element.css("font-size");return Math.floor(1.5*l.parseFloat(a))};d.prototype.getScrollHeight=function(a){return a.getBoundingClientRect().height||a.scrollHeight||0};d.prototype.getSize=function(a){this.element.innerText=this.content.substr(0,a)+this.suffix;return this.convertHeightToLines(this.getScrollHeight(this.element))};d.prototype.isTooBig=function(a){return this.getSize(a)>this.availableHeight};d.prototype.cmp=function(a){return this.isTooBig(a+1)?this.isTooBig(a)?1:0:this.isTooBig(a)?
0:-1};d.prototype.binarySearch=function(){for(var a=0,b=this.content.length-1;a!==b;){var c=Math.floor((b-a)/2+a);0<=this.cmp(c)?b=c:a=c+1}return this.content.substr(0,a)+this.suffix};d.prototype.getOptions=function(a,b){b=b||{};return{suffix:b.suffix||"...",ignoreWebkitBrowsers:!!b.ignoreWebkitBrowsers,wrapper:b.wrapper||a.parentNode}};d.prototype.addAccessibilityAid=function(a,b){this.$element.attr("aria-label",b)};d.prototype.build=function(a,b){this.element=a;this.$element=h(a);this.options=this.getOptions(a,
b);this.lineHeight=this.getLineHeight(a);this.availableHeight=this.convertHeightToLines(this.options.wrapper.offsetHeight);return this};d.prototype.apply=function(){this.isRequired()&&(this.suffix=this.options.suffix,this.content=this.element.textContent.trim(),0!==this.content.length&&(this.element.textContent=this.binarySearch(),this.addAccessibilityAid(this.element,this.content)))};d.prototype.isRequired=function(){var a;if(a=this.options.ignoreWebkitBrowsers)a=navigator.userAgent.toLowerCase(),
a=-1===a.indexOf("edge")&&a.match(/chrome|safari/);return a?!1:this.convertHeightToLines(this.getScrollHeight(this.element))>this.availableHeight};return new d}()});k.when("A","dv-ellipsis","ready").register("dv-carousel",function(g,h){var d=g.$;d(".dv-wdgt-carousel").not(".dv-carousel-loaded").filter(":visible");var a=d(l),b=function(a){this.init(a)},c={},f={};b.prototype={init:function(a){this.cacheElements(a);this.initDefaults();this.measureAll();this.createUI();this.bindEvents()},cacheElements:function(a){this.$carousel=
a;this.$shelf=this.$carousel.find(".dv-shelf");this.$items=this.$shelf.find("li")},initDefaults:function(){this.ATTR={CONTROL_DIR:"data-direction",REF_TAG:"data-reftag"};this.CLASS={CONTROL:"dv-carousel-control",CONTROL_INACTIVE:"dv-carousel-control-inactive"};this.DIR={LEFT:"left",RIGHT:"right"};this.DISTANCE={BOUNCE_IN:0,BOUNCE_SHELF_OUT:30};this.EASE={BOUNCE_BAR_IN:"easeOutCubic",BOUNCE_PAGE_IN:"easeOutBack",BOUNCE_OUT:"swing",CONTROLS_TOGGLE:"easeOutQuad",PAGE_TURN_DYNAMIC:"easeInOutQuad"};this.EVENTS=
{CAROUSEL_DISPLAY:"display.carousel",CAROUSEL_RESIZE:"resize.carousel",CSS_TRANSITION_END:"transitionend webkitTransitionEnd oTransitionEnd",CHANGE_PAGE:"changePage.carousel",LOG_SCROLL:"logScroll.carousel",ITEM_REMOVED:"item.removed"};this.OPACITY={CONTROL_ACTIVE:1,CONTROL_CAROUSEL_INACTIVE:.3,CONTROL_INACTIVE:.5};this.SPEED={BOUNCE_OUT:100,BOUNCE_IN:400,CONTROLS_TOGGLE:150,PAGE_TURN_DYNAMIC_MAX:500,PAGE_TURN_DYNAMIC_MIN:200};this.TYPE={DYNAMIC:"dynamic"};this.METRICS={TOUCH_START_END_THRESHOLD:25,
TOUCH_SCROLL_UPDATE_DELAY:50};this.TOUCH={SCROLLED:!1};this.IS_TOUCH_ENABLED=g.capabilities.touch;this.state={active:!1,bounceLock:!1,hasInteracted:!1,type:""};this.measurement={carousel:{topOffset:this.$carousel.offset().top,width:0},itemSpacing:0,itemWidths:[],shelf:{left:0,width:0}};this.showUIWhenInactive="false"===this.$carousel.attr("data-show-ui-when-inactive")?!1:!0;this.outsideArrows="true"===this.$shelf.attr("data-outside-arrows");this.SLOT=this.getSlotNumber();this.INDEX=this.$carousel.index(".dv-carousel");
this.CLICKS={RIGHT_CLICKS:0,LEFT_CLICKS:0};this.STATUS={END:!1,BEGIN:!1,CLICKED:!1,SCROLLED:!1}},getSlotNumber:function(){for(var a=this.$items.find("a:first").attr("href"),a=a.slice(a.indexOf("?")+1).split("\x26"),c=0;c<a.length;c++){var b=a[c].split("\x3d");if("pf_rd_s"===b[0])return b[1].split("-").pop()}},updateRefTag:function(a){a&&a.hasClass(this.CLASS.CONTROL)&&(a.attr(this.ATTR.CONTROL_DIR)!==this.DIR.RIGHT||this.STATUS.END||this.CLICKS.RIGHT_CLICKS++,a.attr(this.ATTR.CONTROL_DIR)!==this.DIR.LEFT||
this.STATUS.BEGIN||this.CLICKS.LEFT_CLICKS++,this.STATUS.CLICKED=!0);this.IS_TOUCH_ENABLED&&this.TOUCH.SCROLLED&&(this.STATUS.SCROLLED=!0);this.STATUS.END||(this.IS_TOUCH_ENABLED?(a=this.$shelf.width()-this.$carousel.scrollLeft()-this.$carousel.width(),this.STATUS.END=a<=this.METRICS.TOUCH_START_END_THRESHOLD):this.$rightArrow.hasClass(this.CLASS.CONTROL_INACTIVE)&&(this.STATUS.END=!0));!this.STATUS.BEGIN&&(this.IS_TOUCH_ENABLED&&this.$carousel.scrollLeft()<=this.METRICS.TOUCH_START_END_THRESHOLD||
!this.IS_TOUCH_ENABLED&&this.$leftArrow.hasClass(this.CLASS.CONTROL_INACTIVE))&&(this.STATUS.BEGIN=!0);a="";this.STATUS.CLICKED&&(a+="c");this.STATUS.END&&(a+="e");this.STATUS.BEGIN&&(a+="b");this.IS_TOUCH_ENABLED&&(a+="tg");this.STATUS.SCROLLED&&(a+="s");this.$carousel.attr(this.ATTR.REF_TAG,"dv_web_src_i"+this.INDEX+"_"+a+"_r"+this.CLICKS.RIGHT_CLICKS+"_l"+this.CLICKS.LEFT_CLICKS+"_s"+this.SLOT)},sendAnalytics:function(a){a&&d.ajax({url:"/gp/video/ajax/storefront-analytics.html/ref\x3d"+a,data:{},
dataType:"json",timeout:1E4})},bindEvents:function(){var e=this;d("body");d("."+e.CLASS.CONTROL,e.$carousel.parent()).click(function(a){var c=d(this);e.$carousel.trigger(e.EVENTS.CHANGE_PAGE,{dir:c.attr(e.ATTR.CONTROL_DIR)});e.updateRefTag(c);a.preventDefault()});e.$carousel.bind(e.EVENTS.CHANGE_PAGE,function(a,c){e.state.hasInteracted=!0;e.changePage(c.dir)});e.$carousel.bind("scroll.log.touch",function(){e.TOUCH.SCROLLED=!0;e.updateRefTag();e.SLOT in c||(c[e.SLOT]=!0,e.$carousel.trigger(e.EVENTS.LOG_SCROLL,
e.SLOT),e.$carousel.unbind("scroll.log.touch"))});a.bind("beforeunload",function(){e.sendAnalytics(e.$carousel.attr(e.ATTR.REF_TAG))});a.resize(function(a){e.resizeCarousel()});a.bind(e.EVENTS.CAROUSEL_DISPLAY,function(){e.$carousel.parents(":hidden").length||e.resetCarousel()});a.bind(e.EVENTS.CAROUSEL_RESIZE,function(a){a.target===e.$carousel.get(0)&&(e.removeWhiteSpace(),e.checkBothArrows())});d("."+e.CLASS.CONTROL,e.$carousel).bind(e.EVENTS.CSS_TRANSITION_END,function(a){a.stopPropagation()});
e.$carousel.bind(e.EVENTS.ITEM_REMOVED,function(){e.$items=e.$shelf.find("li");e.removeWhiteSpace()})},bounce:function(a,c){var b={},b=this.isDirectionRight(c)?{marginLeft:-this.DISTANCE.BOUNCE_SHELF_OUT}:{marginLeft:this.DISTANCE.BOUNCE_SHELF_OUT};this.bounceAnimate(a,b,this.EASE.BOUNCE_PAGE_IN)},bounceAnimate:function(a,c,b){var f=this;f.state.bounceLock=!0;a.animate(c,f.SPEED.BOUNCE_OUT,f.EASE.BOUNCE_OUT,function(){a.animate({marginLeft:0},f.SPEED.BOUNCE_IN,b,function(){f.state.bounceLock=!1})})},
measureAll:function(){this.measureCarousel();this.measureShelf()},measureCarousel:function(){this.measurement.carousel.width=this.$carousel.width();return this.measurement.carousel.width},measureShelf:function(a){var c=this,b=0;"true"===c.$carousel.attr("data-elastic-items")&&c.setExplicitSizes();c.measurement.itemWidths=[];c.$items.each(function(a){var e=d(this),f=e.outerWidth();0===a&&(c.measurement.itemSpacing=e.outerWidth(!0)-f);c.measurement.itemWidths.push({left:b,width:f});b+=f+c.measurement.itemSpacing});
c.measurement.shelf.width=b-c.measurement.itemSpacing;a||(c.measurement.shelf.left=0);c.EASE.PAGE_TURN=c.EASE.PAGE_TURN_DYNAMIC;c.SPEED.PAGE_TURN=c.SPEED.PAGE_TURN_DYNAMIC_MAX;c.IS_TOUCH_ENABLED&&c.$shelf.width(c.measurement.shelf.width+c.measurement.itemSpacing);return c.measurement.shelf.width},setExplicitSizes:function(){var a=this.$items.first();this.$items.css({display:"block",width:a.width(),height:a.height(),padding:0,marginRight:20,left:0,right:0});this.$shelf.css({width:99999})},resizeCarousel:function(){this.measureAll();
"function"===typeof this.fixOutOfBounds&&this.fixOutOfBounds();this.checkCarouselActive();this.checkBothArrows(this.measurement.shelf.left)},resetCarousel:function(){this.state.hasInteracted=!1;this.measureAll();this.resetPagination();this.checkCarouselActive();this.positionControls();this.checkBothArrows(this.measurement.shelf.left)},checkCarouselActive:function(){this.isShelfWiderThanCarousel()?this.activateCarousel():this.deactivateCarousel()},activateCarousel:function(a){this.state.active=!0;
this.activateArrow(this.$rightArrow,a);this.activateArrow(this.$leftArrow,a)},deactivateCarousel:function(a){this.state.active=!1;this.deactivateArrow(this.$rightArrow,a);this.deactivateArrow(this.$leftArrow,a);"function"===typeof this.fixOutOfBounds&&this.fixOutOfBounds()},createUI:function(){var a=this;a.IS_TOUCH_ENABLED&&a.$carousel.data("context-touch-available")||(a.$rightArrow=a.createControl(a.DIR.RIGHT),a.$leftArrow=a.createControl(a.DIR.LEFT),a.hideArrow(a.$leftArrow),a.hideArrow(a.$rightArrow),
setTimeout(function(){a.checkBothArrows(a.measurement.shelf.left)},50));a.$carousel.parents(":hidden").length||a.positionControls();a.isShelfWiderThanCarousel()?a.state.active=!0:(a.state.active=!1,a.deactivateCarousel(!0))},createControl:function(a){var c=this.$carousel.find("a.dv-carousel-"+a);if(!c.length){var c=d("\x3ca/\x3e").addClass(this.CLASS.CONTROL+" dv-carousel-"+a).attr("href","#").append(d("\x3ci/\x3e").addClass("dv-icon dv-icon-"+a)),b=this.$carousel;this.outsideArrows?a===this.DIR.LEFT?
b.before(c):b.after(c):b.append(c)}c.attr(this.ATTR.CONTROL_DIR,a);return c},arrowTopPos:function(){return this.outsideArrows?this.$carousel.position().top:this.$shelf.position().top+this.$shelf.height()/2-this.$rightArrow.height()/2},positionControls:function(){this.$rightArrow&&this.$leftArrow&&this.$rightArrow.add(this.$leftArrow).css({top:this.arrowTopPos()})},hideArrow:function(a){if(a){var c={opacity:0},b=a.width();this.outsideArrows?c.display="none":a===this.$leftArrow?c.left=-b:a===this.$rightArrow&&
(c.right=-b);a.css(c)}},activateArrow:function(a,c){if(a){var b={opacity:this.OPACITY.CONTROL_ACTIVE};a!==this.$leftArrow||this.state.hasInteracted||(b.opacity=0);this.outsideArrows?b.display="block":a===this.$leftArrow?b.left=0:b.right=0;a.removeClass(this.CLASS.CONTROL_INACTIVE);this.setArrow(a,b,c)}},deactivateArrow:function(a,c){if(a){var b=a.width(),f={opacity:this.OPACITY.CONTROL_INACTIVE};a.addClass(this.CLASS.CONTROL_INACTIVE);a.is(":visible")&&(this.state.hasInteracted||(f.opacity=0),this.showUIWhenInactive||
this.state.active||(f.opacity=0,this.outsideArrows?f.display="none":a===this.$leftArrow?f.left=-b:a===this.$rightArrow&&(f.right=-b)),this.setArrow(a,f,c))}},setArrow:function(a,c,b){a&&(b||this.outsideArrows?a.css(c):a.stop().animate(c,this.SPEED.CONTROLS_TOGGLE,this.EASE.CONTROLS_TOGGLE))},checkBothArrows:function(a){a=a||this.measurement.shelf.left;this.checkArrow(this.isFirstPage(a),this.$leftArrow);this.checkArrow(this.isLastPage(a),this.$rightArrow)},checkArrow:function(a,c){c&&(a?this.deactivateArrow(c):
this.activateArrow(c))},calcMinShelfOffset:function(){return 0},calcMaxShelfOffset:function(){return this.measurement.shelf.width-this.measurement.carousel.width},calcShelfLeftFromPercentage:function(a){return a/100*this.measurement.shelf.width},calcDelta:function(a){return this.isDirectionRight(a)?1:-1},isCarouselVisible:function(){var c=!1,b=a.height(),f=a.scrollTop();b+f>this.measurement.carousel.topOffset&&(c=!0);return c},isDirectionRight:function(a){return a===this.DIR.RIGHT},isShelfWiderThanCarousel:function(a,
c){a=a||this.measurement.shelf.width;c=c||this.measurement.carousel.width;return 0===c?!1:a>c},changePage:function(a){var c=this.measurement.shelf.left,b=0;(this.isDirectionRight(a)?this.isLastPage(c):this.isFirstPage(c))?this.state.bounceLock||this.bounce(this.$shelf,a):(b=this.calcNextPage(c,a),this.scrollToTargetLeft(b),this.reactivateButtonsAfterScrolling(a),this.SLOT in f||(f[this.SLOT]=!0,this.$carousel.trigger(this.EVENTS.LOG_SCROLL,this.SLOT)))},scrollToItem:function(a){var c;c=this.calcMaxShelfOffset();
var b;this.state.hasInteracted=!0;b=this.measurement.shelf.left;a=this.measurement.itemWidths[a].left;c=a<c?a:c;this.scrollToTargetLeft(c);this.reactivateButtonsAfterScrolling(c<b?this.DIR.LEFT:this.DIR.RIGHT)},scrollToTargetLeft:function(a){var c=this.calcSpeedByDistance(this.measurement.shelf.left,a);this.measurement.shelf.left=a;this.transitionPage(a,c)},reactivateButtonsAfterScrolling:function(a){a=this.isDirectionRight(a);this.IS_TOUCH_ENABLED&&this.$carousel.data("context-touch-available")||
(a&&this.state.hasInteracted?(this.activateArrow(this.$leftArrow),this.isLastPage(this.measurement.shelf.left)&&this.deactivateArrow(this.$rightArrow)):(this.activateArrow(this.$rightArrow),this.isFirstPage(this.measurement.shelf.left)&&this.deactivateArrow(this.$leftArrow)))},findClosestItem:function(a,c){var b=this.isDirectionRight(c),f=this.measurement.itemWidths.length,d=0,g=0,h=b?-1:0,k=0,l=!1,m=g=!1;for(k;k<f;k++)if(g=this.measurement.itemWidths[k].left,l=g>a,g=g===a,m=k===f-1,l||!b&&(g||m)){d=
this.measurement.itemWidths[k+h].left;break}else if(m){d=this.measurement.itemWidths[k].left;break}return d},transitionPage:function(a,c){c=c||this.SPEED.PAGE_TURN;this.$shelf.animate({left:-a},c,this.EASE.PAGE_TURN);this.state.outOfBounds=!1},removeWhiteSpace:function(){var a=this.measurement.shelf.left,c=this.measurement.shelf.width,b=this.measureShelf(!0);this.isLastPage(a)&&(a-=c-b,this.scrollToTargetLeft(0<a?a:0))},fixOutOfBounds:function(){var a=this.measurement.shelf.left;this.isFirstPage(a)?
this.setShelfLeft(this.calcMinShelfOffset()):this.isLastPage(a)&&this.setShelfLeft(this.calcMaxShelfOffset())},resetPagination:function(){this.setShelfLeft(this.calcMinShelfOffset())},setShelfLeft:function(a){this.measurement.shelf.left=a;this.$shelf.css({left:-a})},calcIdealLeft:function(a,c){var b=0;return b=c===this.DIR.RIGHT?a+this.measurement.carousel.width+this.measurement.itemSpacing:a-this.measurement.carousel.width-this.measurement.itemSpacing},calcNextPage:function(a,c){var b;b=this.isLastPage(a);
var f=this.isDirectionRight(c),d=f?this.calcMaxShelfOffset():this.calcMinShelfOffset();b=b?this.findClosestItem(a,this.DIR.LEFT):a;b=this.calcIdealLeft(b,c);b=this.findClosestItem(b,c);return b=(f?this.isLastPage(b):this.isFirstPage(b))?d:b},calcSpeedByDistance:function(a,c){var b=this.SPEED.PAGE_TURN,f=this.SPEED.PAGE_TURN_DYNAMIC_MIN,b=f+Math.abs((c-a)/this.measurement.carousel.width*(b-f));return parseInt(b,10)},isFirstPage:function(a){return a<=this.calcMinShelfOffset()},isLastPage:function(a){return a>=
this.calcMaxShelfOffset()}};g.on("a:pageUpdate beforeReady",function(){d(".dv-wdgt-carousel:not(.dv-carousel-loaded):visible").each(function(){new b(d(this).addClass("dv-carousel-loaded"))});d("[dv-multiline-overflow-ellipsis]").each(function(a,c){h.build(c,{ignoreWebkitBrowsers:!0}).apply()})});return b});k.when("A","a-carousel-framework","dv-carousel-scrolling","ready").execute(function(g,h,d){var a=g.$;h.onInit("dv-super-hero",function(b){({defaults:{carouselContentClass:"dv-carousel-content",
paginationClass:"dv-dot-pagination",paginationItemClass:"dv-dot-pagination-item",paginationGroupName:"dv-dot-pagination-group",highlightItemClass:"dv-dot-highlight",controlClass:"dv-carousel-control",innerClass:"dv-carousel-inner",showPagination:g.capabilities.mobile||g.capabilities.touch?!1:!0,continueAnimation:!0,totalItems:0,autoRotateInterval:0,timer:a("#dv-super-hero").data("a-carousel-options").animation_speed||5E3},dvCarouselLeft:void 0,dvCarouselRight:void 0,dvCarouselControl:void 0,init:function(){this.options=
a.extend({},this.defaults,{});this.carousel=b;this.carouselSetup();(g.capabilities.touch||g.capabilities.mobile)&&d.init(this)},carouselSetup:function(){var a=this.options.showPagination,b=this.carousel.dom.$container.find("li");this.totalItems=b?b.length:0;this.setupButtons();this.setCurrentPageNumber(1);a&&this.setupPagination();this.setupAnimation();this.addCarouselListeners()},setupPagination:function(){var a=this.carousel.dom.$container,b=this.options.paginationClass||"",e=this.getCurrentPageNumber();
if(e=1<this.totalItems?this.getPaginationItemsHtml(e):"")a.append(e),a.find("."+b).fadeIn(),this.paginationClickEvent()},setCurrentPageNumber:function(a){a&&1<a&&(this.currentPageNumber=a)},getCurrentPageNumber:function(){return this.currentPageNumber||1},getPaginationItemHtml:function(a,b){var e=this.options;return'\x3ca href\x3d"#" class\x3d"'+(e.paginationItemClass||"")+(b&&e?" "+e.highlightItemClass:"")+'" data-carousel-page\x3d"'+a+'"\x3e'+a+" \x3c/a\x3e"},getPaginationItemsHtml:function(a){var b=
this.totalItems;if(!(b&&1>b)){a=a||1;for(var e='\x3cul class\x3d"'+(this.options.paginationClass||"")+'"\x3e',d=1;d<=b;d++)e+="\x3cli\x3e"+this.getPaginationItemHtml(d,a===d)+"\x3c/li\x3e";return e+"\x3c/ul\x3e"}},addCarouselListeners:function(){var c=this,b=this.options;this.carousel.dom.$container.find("."+b.innerClass).each(function(d){a(this).bind("mouseover",function(a){c.clearAnimation()});a(this).bind("mouseout",function(a){b.continueAnimation&&c.setupAnimation()})})},pageLinkAction:function(a){var b=
this.carousel;this.setCurrentPageNumber(a+1);b.strategies.transition.gotoPage(b,a+1,{animationDuration:500,easing:"ease-in-out"})},backToFirstPage:function(){var c=this,b=a('.dv-dot-pagination-item[data-carousel-page\x3d"1"]');b.length?b.trigger("click",function(a){a.preventDefault();c.pageLinkAction(1)}):c.pageLinkAction(0)},paginationClickEvent:function(){var c=this,b=this.options,d=b.controlClass,g=this.carousel.dom.$container;g.find("li ."+(b.paginationItemClass||"")).each(function(d){a(this).bind("click",
function(a){a.preventDefault();b.continueAnimation=!1;c.clearAnimation();c.pageLinkAction(d);g.trigger("logScroll.superheroCarousel",0)})});g.delegate("span."+d,"click",function(a){a.preventDefault();b.continueAnimation=!1;c.clearAnimation();g.trigger("logScroll.superheroCarousel",0)})},paginationChangeEvent:function(){var a=this;g.on("a:carousel:dv-super-hero:change:pageNumber",function(b){var d=b.carousel,g=d.dom.$container,h=a.options;if(h.showPagination){var k=h.highlightItemClass||"";g.find("li ."+
(h.paginationItemClass||"")).removeClass(k).eq(b.newValue-1).addClass(k)}d=d.getAttr("set_size")===b.newValue;b=1===b.newValue;this.dvCarouselLeft&&this.dvCarouselRight&&this.dvCarouselControl||(this.dvCarouselLeft=g.find(".dv-carousel-left"),this.dvCarouselRight=g.find(".dv-carousel-right"),this.dvCarouselControl=g.find(".dv-carousel-control"));d?(this.dvCarouselLeft.removeClass("dv-carousel-control-inactive"),this.dvCarouselRight.addClass("dv-carousel-control-inactive")):b?(this.dvCarouselRight.removeClass("dv-carousel-control-inactive"),
this.dvCarouselLeft.addClass("dv-carousel-control-inactive")):this.dvCarouselControl.removeClass("dv-carousel-control-inactive");a.autoRotateInterval&&d&&(h.continueAnimation=!1,a.clearAnimation(),setTimeout(function(){a.backToFirstPage()},5E3))})},clearAnimation:function(){this.autoRotateInterval&&(clearInterval(this.autoRotateInterval),this.autoRotateInterval=0)},setupAnimation:function(){var a=this.options;1<this.totalItems&&(this.clearAnimation(),this.autoRotateInterval=g.interval(function(){b.gotoNextPage()},
a.timer));this.paginationChangeEvent()},setupButtons:function(){var a=this.carousel.dom.$container;a.find(".a-carousel-row-inner").addClass(this.options.innerClass);if(1<a.find("li.a-carousel-card").length){var b=a.find(".a-carousel-goto-nextpage");b.addClass("dv-carousel-control dv-carousel-right");b.find(".a-button-inner").addClass("dv-carousel-control dv-carousel-right");a.find(".a-icon-next").addClass("dv-icon dv-icon-right");b=a.find(".a-carousel-goto-prevpage");b.addClass("dv-carousel-control dv-carousel-left");
b.find(".a-button-inner").addClass("dv-carousel-control dv-carousel-left dv-carousel-control-inactive");a.find(".a-icon-previous").addClass("dv-icon dv-icon-left")}}}).init()})});k.when("A","ready").register("dv-carousel-scrolling",function(g){var h=g.$;return{autoRotateInterval:null,originalPosition:{clickedX:0,clickedY:0,x:0,y:0},movement:null,carouselObject:{},$viewport:{},viewportWidth:0,$container:0,$items:{},totalItems:0,lastEvent:null,percentThreshold:25,init:function(d){this.carouselObject=
d;this.$viewport=this.carouselObject.carousel.dom.$viewport;this.viewportWidth=this.$viewport.width();this.$container=this.$viewport.find("ol");this.$items=this.$container.find("li");this.totalItems=this.$items.length;this.$viewport.hasClass("a-gesture")&&this.$viewport.removeClass("a-gesture");this.$viewport.hasClass("a-gesture-horizontal")&&this.$viewport.removeClass("a-gesture-horizontal");this._bindEvents()},_bindEvents:function(){var d=this;this.$viewport.bind("touchstart.dv.touch",function(a){d.movement=
null;d._setOriginalX(a.originalEvent);d._bindTouchEvents()})},_bindTouchEvents:function(){var d=this;this.$viewport.bind("touchmove.dv.touch",function(a){d.carouselObject.clearAnimation();d.lastEvent=a;d._moveItem(d.lastEvent)});this.$viewport.bind("touchend.dv.touch",function(a){d._moveToItem(a);d.originalPosition.clickedX=0;d.originalPosition.x=0;d.originalPosition.clickedY=0;d.originalPosition.y=0})},_moveItem:function(d){var a=this._getMovementDetails(d),b=parseInt(a.$item.attr("aria-posinset"),
10),c=this._getPercentageMoved(a),f=a.offsetX,e=Math.abs(this.originalPosition.x),g=!0;a.offsetY<a.offsetX&&(d.preventDefault(),(b===this.totalItems||1===b)&&c>=this.percentThreshold?(this.$viewport.trigger("touchend.dv.touch"),g=!1):e="previous"===a.direction&&1===b&&c<this.percentThreshold?e+Math.abs(f):"next"===a.direction?-Math.abs(e+f):-Math.abs(e-f),g&&this.$container.css({transition:"all 0s ease 0s",transform:"translate3d("+e+"px, 0, 0)","transform-style":"preserve-3d"}))},_moveToItem:function(d){d=
this._getMovementDetails(d);var a=parseInt(d.$item.attr("aria-posinset"),10),b=this._getPercentageMoved(d),c=0,f=c=1;b>=this.percentThreshold&&"previous"===d.direction&&1<a?(c=a-2,f=a-1):b>=this.percentThreshold&&"next"===d.direction&&a<this.totalItems?(c=a,f=a+1):(c=a-1,f=a);c=-Math.abs(this.viewportWidth*c);this.$container.css({transition:"all 0.5s ease-in-out 0s",transform:"translate3d("+c+"px, 0, 0)","transform-style":"preserve-3d"});a!==f&&this.$container.trigger("logScroll.superheroCarousel",
0);d.$item.attr("aria-hidden",!0);this.$container.find('.a-carousel-card[aria-posinset\x3d"'+f+'"]').attr("aria-hidden",!1);this.$viewport.unbind("touchmove.dv.touch");this.$viewport.unbind("touchend.dv.touch");this.lastEvent=null},_setOriginalX:function(d){var a=this.$container.css("transform")?this.$container.css("transform").split(","):[0,0,0,0,0],b=parseInt(a[4],10),a=parseInt(a[5],10);this.originalPosition.clickedX=d.touches[0].pageX?d.touches[0].pageX:d.pageX;this.originalPosition.clickedY=
d.touches[0].pageY?d.touches[0].pageY:d.pageY;this.originalPosition.x=b;this.originalPosition.y=a},_getPercentageMoved:function(d){d=Math.abs(d.offsetX/this.viewportWidth*100);return Math.round(d)},_getMovementDetails:function(d){var a=0,b=0,c=(b=d.originalEvent?d:this.lastEvent)&&b.originalEvent&&b.originalEvent.changedTouches?b.originalEvent.changedTouches[0]:null;d=b&&b.target?h(b.target).parents("li"):null;var f=a=0,e="";c?(a=c.pageX,b=c.pageY):(a=b.pageX,b=b.pageY);a<this.originalPosition.clickedX?
(e="next",a=this.originalPosition.clickedX-a):(e="previous",a-=this.originalPosition.clickedX);f=b<this.originalPosition.clickedY?b:b-this.originalPosition.clickedY;return{direction:e,offsetX:a,offsetY:f,$item:d}}}});k.when("A","ready").execute(function(g){function h(){g.$.easing.jswing=g.$.easing.swing;g.$.extend(g.$.easing,{def:"easeOutQuad",swing:function(d,a,b,c,f){return g.$.easing[g.$.easing.def](d,a,b,c,f)},easeInQuad:function(d,a,b,c,f){return c*(a/=f)*a+b},easeOutQuad:function(d,a,b,c,f){return-c*
(a/=f)*(a-2)+b},easeInOutQuad:function(d,a,b,c,f){return 1>(a/=f/2)?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},easeInCubic:function(d,a,b,c,f){return c*(a/=f)*a*a+b},easeOutCubic:function(d,a,b,c,f){return c*((a=a/f-1)*a*a+1)+b},easeInOutCubic:function(d,a,b,c,f){return 1>(a/=f/2)?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b},easeInQuart:function(d,a,b,c,f){return c*(a/=f)*a*a*a+b},easeOutQuart:function(d,a,b,c,f){return-c*((a=a/f-1)*a*a*a-1)+b},easeInOutQuart:function(d,a,b,c,f){return 1>(a/=f/2)?c/2*a*a*a*a+b:-c/2*((a-=
2)*a*a*a-2)+b},easeInQuint:function(d,a,b,c,f){return c*(a/=f)*a*a*a*a+b},easeOutQuint:function(d,a,b,c,f){return c*((a=a/f-1)*a*a*a*a+1)+b},easeInOutQuint:function(d,a,b,c,f){return 1>(a/=f/2)?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b},easeInCirc:function(d,a,b,c,f){return-c*(Math.sqrt(1-(a/=f)*a)-1)+b},easeOutCirc:function(d,a,b,c,f){return c*Math.sqrt(1-(a=a/f-1)*a)+b},easeOutElastic:function(d,a,b,c,f){d=1.70158;var e=0,g=c;if(0===a)return b;if(1===(a/=f))return b+c;e||(e=.3*f);g<Math.abs(c)?(g=
c,d=e/4):d=e/(2*Math.PI)*Math.asin(c/g);return g*Math.pow(2,-10*a)*Math.sin(2*(a*f-d)*Math.PI/e)+c+b},easeInBack:function(d,a,b,c,f,e){void 0===e&&(e=1.70158);return c*(a/=f)*a*((e+1)*a-e)+b},easeOutBack:function(d,a,b,c,f,e){void 0===e&&(e=1.70158);return c*((a=a/f-1)*a*((e+1)*a+e)+1)+b},easeInOutBack:function(d,a,b,c,f,e){void 0===e&&(e=1.70158);return 1>(a/=f/2)?c/2*a*a*(((e*=1.525)+1)*a-e)+b:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b},easeOutBounce:function(d,a,b,c,f){return(a/=f)<1/2.75?7.5625*
c*a*a+b:a<2/2.75?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:a<2.5/2.75?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b}})}g.$.easing.jswing||h()});k.when("jQuery","logging","ready").register("RemoveItems",function(g,h){var d=function(a,b){var c={canDisablePage:!0,css:{prefix:"dv-list-remove-item",wrapper:"dv-standard-carousel",heading:"dv-carousel-heading",editHeader:"dv-carousel-heading-edit",itemLink:"dv-packshot"},translations:{editText:"Edit",doneText:"Done",removeText:"Remove",
errorText:"There was a problem removing the title, please try again later."}};a&&1===a.get(0).nodeType&&b&&b.hasOwnProperty("token")&&b.hasOwnProperty("listType")&&b.hasOwnProperty("ajaxEndpoint")&&(this.log("Setting up options..."),this.options=g.extend({},c,b),this.log("Constructing RemoveItems for '"+this.getListType()+"'"),this.$element=g(a),this.$parent=this.$element.closest("."+this.options.css.wrapper),this.editing=!1,this.init())};d.prototype={init:function(){this.log("'RemoveItems' initialising...");
this.updateContainer()},updateContainer:function(){var a=this.$parent,b=this.options,c=this.$element.find("[data-asin]").first();c&&0<c.length&&a.length&&a.hasClass(b.css.wrapper)?(a=a.find("."+b.css.heading),a.addClass(b.css.editHeader),a.find(":header:first").after(this.createEditLink()),this.registerListeners()):this.log("Cannot find parent element")},registerListeners:function(){var a=this,b=null,c=!1;a.log("Registering Listeners...");this.$parent.delegate(this.cssPrefix("toggle",!0),"click",
function(b){c||(c=!0,b.stopPropagation(),b.preventDefault(),g(this).hasClass(a.cssPrefix("done"))?a.disableEditMode():a.enableEditMode(),c=!1)});g(document).delegate(this.cssPrefix("overlay",!0,!0),"click",function(b){c||(c=!0,b.stopPropagation(),b.preventDefault(),a.disableEditMode(),c=!1)});this.$parent.delegate(this.cssPrefix("delete",!0),"click",function(d){c||(c=!0,b=g(this).data("asin"),a.log("Clicked to remove ASIN:"+b),d.stopPropagation(),d.preventDefault(),a.requestRemoveItem(g(this),b),
c=!1)})},cssPrefix:function(a,b,c){return(b?c?"#":".":"")+this.options.css.prefix+"-"+a},getToken:function(){return this.options.token||""},getAjaxUrl:function(){return this.options.ajaxEndpoint||""},hasAjaxFired:function(a){a=a.data("ajax-fired");this.log("hasAjaxFired: "+a);return a},startAjaxFired:function(a){this.log("startAjaxFired");a.data("ajax-fired",!0)},endAjaxFired:function(a){this.log("endAjaxFired");a.data("ajax-fired",!1)},hideHover:function(){var a=g("#universal-hover");a&&a.hide()},
getAjaxData:function(a){a=a||"";var b=g("#pageData");a={token:this.getToken(),type:this.getListType(),asin:a,ASIN:a,dataType:"json",addItem:0};b&&0<b.length&&(a.pageType=b.data("data-page-type")||"",a.subPageType=b.data("data-sub-page-type")||"",a.store=b.data("data-store")||"",a.request=b.data("data-request")||"");return a},requestRemoveItem:function(a,b){var c=this,d=this.getAjaxUrl();d||b?(this.log("Removing Item ASIN: "+b+" from "+this.getListType()),this.hasAjaxFired(a)?this.log("AJAX request already in progress for this ASIN: "+
b):(this.startAjaxFired(a),g.ajax({url:d,type:"GET",dataType:"json",contentType:"application/json; charset\x3dutf-8",global:!1,cache:!1,data:this.getAjaxData(b),beforeSend:function(){c.log("Starting ajax call for "+this.url);c.addLoader(a);c.hideHover()},success:function(b,d,f){c.log("Successfully removed title.",d,f);c.removeItem(a,b)},error:function(a,b,d){c.error("Failed to load "+this.url,a,b,d)},complete:function(b,d){c.endAjaxFired(a);c.removeLoader(a)}}))):this.log("Missing key attributes for AJAX request")},
createEditLink:function(){return'\x3ca href\x3d"#" class\x3d"'+this.cssPrefix("toggle")+" "+this.cssPrefix("edit")+'" \x3e'+this.getEditText()+"\x3c/a\x3e"},toggleEditLink:function(){var a=this.$parent.find(this.cssPrefix("toggle",!0));this.log("Toggle edit link ["+this.getListType()+"]...");a.length&&(this.log("Found edit link..."),a.hasClass(this.cssPrefix("edit"))?(this.log("Changing edit link to done..."),a.html(this.getDoneText()),a.removeClass(this.cssPrefix("edit")).addClass(this.cssPrefix("done"))):
(this.log("Changing done link to edit..."),a.html(this.getEditText()),a.removeClass(this.cssPrefix("done")).addClass(this.cssPrefix("edit"))))},enableEditMode:function(){var a=this,b=this.$parent;this.log("Enabling edit mode on: "+b);this.isEditing()?this.log("Enabling edit aborted - already in edit mode"):(b.trigger("enableEditMode.carousel"),this.startEditing(),this.canDisablePage()&&this.showPageOverlay(),this.toggleEditLink(),b.find("[data-asin]").each(function(b){a.log("Show overlay: "+b);a.showOverlay(g(this))}))},
disableEditMode:function(){var a=this,b=this.$parent,c=this.cssPrefix("overlay",!0)+", "+this.cssPrefix("delete",!0);this.log("Disabling edit mode");this.isEditing()?(this.stopEditing(),this.canDisablePage()&&this.removePageOverlay(),this.toggleEditLink(),this.log("Removing removal links..."),b.find(c).each(function(){a.log("Removing remove link...");g(this).remove()})):this.log("Disabling edit aborted")},showOverlay:function(a){var b="",b=a.width()||0,c=a.height()||0,d=a.data("asin")||"";!a.find("."+
this.cssPrefix("overlay")).length&&d?(this.log("Showing overlay for ASIN: "+d),b=this.getRemoveOverlayHtml(d,b,c),a.prepend(b)):this.log("Overlay already exists")},showPageOverlay:function(){this.highlightSelectedElement();this.log("Checking DOM for existing page overlay...");g(this.cssPrefix("overlay",!0,!0)).length?this.log("Overlay already in DOM!"):(this.log("Adding overlay to DOM"),g("body").append(this.getPageOverlayHtml()))},removePageOverlay:function(){var a=this;g(this.cssPrefix("overlay",
!0,!0)).animate({opacity:0},100,function(){a.log("Page overlay FADE OUT complete. Removing item from DOM...");g(this).remove()});this.revertSelectedElement()},highlightSelectedElement:function(){this.log("highlighting list");this.$parent.closest("."+this.options.css.wrapper).addClass(this.cssPrefix("highlight-selected"))},revertSelectedElement:function(){this.log("Reverting list highlighting");this.$parent.closest("."+this.options.css.wrapper).removeClass(this.cssPrefix("highlight-selected"))},getPageOverlayHtml:function(){return'\x3cdiv id\x3d"'+
this.cssPrefix("overlay")+'"\x3e\x3c/div\x3e'},getRemoveOverlayHtml:function(a,b,c){return'\x3ca class\x3d"'+this.cssPrefix("overlay")+'" style\x3d"width:'+b+"px; height:"+c+'px;"\x3e\x3cspan class\x3d"'+this.cssPrefix("overlay-inner")+'"\x3e'+this.getRemoveText()+"\x3c/span\x3e\x3c/a\x3e"+this.getRemoveButtonHtml(a)},getRemoveButtonHtml:function(a){return'\x3ca href\x3d"#" class\x3d"'+this.cssPrefix("delete")+'" data-asin\x3d"'+a+'"\x3e\x3cdiv class\x3d"'+this.cssPrefix("delete-outer")+'"\x3e\x3cdiv class\x3d"'+
this.cssPrefix("delete-inner")+'"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/a\x3e'},validateJsonResponse:function(a){var b=!1,c=a&&a.hasOwnProperty("success")?a.success:!1;(a=a&&a.hasOwnProperty("error")?a.error:void 0)||!c||"0"===c?(this.log("JSON: is NOT OK success is 0"),this.error("JSON: is NOT OK error:",a," success:",c)):c&&"0"!==c?(b=!0,this.log("JSON: succeeded successfully")):(this.log("JSON: is NOT OK | No error provided"),this.error("JSON: is NOT OK | No error provided"));return b},removeItem:function(a,
b){var c=this,d=c.validateJsonResponse(b),e=a.closest("li"),g=a.closest(".dv-carousel");c.log("Is valid reponse: "+d);d?(e.addClass("dv-removing"),c.log("Fading out ASIN: "+a.data("asin")),e.animate({opacity:0,width:"toggle"},400,function(){c.log("Parent Fade complete. Removing item from DOM...");e.remove();c.listClean();g.trigger("item.removed")})):c.log("Invalid response - Unlocking additional AJAX calls")},listClean:function(){var a=this,b=this.$element;b&&1>b.find("li").length&&this.$parent.animate({opacity:0,
height:"toggle"},400,function(){a.stopEditing();a.removePageOverlay();a.$parent.remove()})},addLoader:function(a){a.length&&!a.find(".dv-loading").length&&(a.find(".dv-list-remove-item-delete-outer").css("display","none"),a.prepend('\x3cspan class\x3d"av-spinner dv-loading dv-loading-medium dv-loading-vertical-align"\x3e\x3cspan class\x3d"dv-loading-inner"\x3e\x3c/span\x3e\x3c/span\x3e'))},removeLoader:function(a){a.length&&a.find(".dv-loading").remove()},getEditText:function(){return this.options.translations.editText},
getDoneText:function(){return this.options.translations.doneText},getRemoveText:function(){return this.options.translations.removeText},getListType:function(){return this.options.listType||""},canDisablePage:function(){return!!this.options.canDisablePage},isEditing:function(){return this.editing},startEditing:function(){this.editing=!0},stopEditing:function(){this.editing=!1}};h.extend(d,"RemoveItems");g('[data-shelf-type\x3d"AIV:Watchlist"],[data-shelf-type\x3d"AIV:NextUp"]').each(function(){var a=
g(this),b=a?a.data("editData"):{};new d(a,b)});return d});k.when("A","ready").register("carousel-scroll-logger",function(g){var h=g.$,d=l.ue,$superheroCarousel=h("#dv-super-hero"),b={},c={recordEvent:function(b,c){void 0===c&&(c=0);if("object"===typeof d&&"function"===typeof d.count){var g=d.count(b,void 0,{scope:"c"+c})||0;d.count(b,g+1,{scope:"c"+c})}},bindScrollListener:function(){h(".dv-standard-carousel .a-carousel-viewport").unbind("scroll.log");h(".dv-standard-carousel .a-carousel-viewport").each(function(){var b=
h(this).find(".a-carousel a:first").attr("href").match(/pf_rd_s=center\-([0-9]+)/),b=b&&2<=b.length?b[1]:0;h(this).data("slot",b)});h(".dv-standard-carousel .a-carousel-viewport").bind("scroll.log",function(c){c=h(this).data("slot");c in b||(b[c]=!0,h(this).trigger("logScroll.carousel",c))})},bindCarouselEventListeners:function(){var b=this;h(".dv-wdgt-carousel, .dv-standard-carousel .a-carousel-viewport").unbind("logScroll.carousel");h(".dv-wdgt-carousel, .dv-standard-carousel .a-carousel-viewport").bind("logScroll.carousel",
function(c,d){b.recordEvent("CarouselScroll",d)})},bindSuperHeroEventListener:function(){var b=this;$superheroCarousel.unbind("logScroll.superheroCarousel");$superheroCarousel.bind("logScroll.superheroCarousel",function(c){b.recordEvent("SuperheroScroll",0)})},init:function(){g.capabilities.mobile&&this.bindScrollListener();this.bindCarouselEventListeners();this.bindSuperHeroEventListener()}};g.on("a:pageUpdate beforeReady",function(){c.init()})})});