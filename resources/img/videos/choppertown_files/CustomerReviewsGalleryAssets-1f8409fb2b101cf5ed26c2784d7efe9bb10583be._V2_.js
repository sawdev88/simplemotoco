(function(g){var p=window.AmazonUIPageJS||window.P,t=p._namespace||p.attributeErrors,b=t?t("CustomerReviewsGalleryAssets"):p;b.guardFatal?b.guardFatal(g)(b,window):b.execute(function(){g(b,window)})})(function(g,p,t){g.when("A","load").register("review-image-asset-loader",function(b){var a=!1;b.ajax("/gp/customer-reviews/aj/private/reviewsGallery/get-image-gallery-assets",{method:"post",success:function(b){g.load.css(b.reviewsLightboxCSS);g.load.js(b.reviewsLightboxJS);a=!0;g.register("review-image-assets-loaded",
{})},error:function(){var a;a="/gp/customer-reviews/aj/metrics/log-values?noCache="+(new Date).getTime();a+="&SimpleStack:ReviewImageAssetLoaderFailure=1";p.Image&&((new Image).src=a)}});return{isLoaded:function(){return a}}});g.when("A","jQuery","cr-log-utils","review-image-assets-loaded").register("review-image-binder",function(b,a,c){function d(b,d,f,q,n){if(!(b&&d&&f instanceof a&&q instanceof a&&n instanceof a))return c.logError("Invalid parameters for imageBinder.initializeForAsin with ASIN: "+
b+", galleryName: "+d+", $popoverTrigger: "+f+", $thumbnails: "+q+", $galleryLink: "+n,"FATAL"),!1;(new ReviewsLightbox(d,"DESKTOP")).initializeForAsin(b);var l="reviewsLightbox-ready-"+d;q.click(function(){var b=q.index(this);f.click();g.when(l).execute(function(){a("#"+d).trigger("jumpToImageAtIndex",b)})});n.click(function(){f.click();g.when(l).execute(function(){a("#"+d).trigger("hideImmersiveView")})});return!0}g.when("reviewsLightbox-js").execute(function(){var b=a("#reviews-image-gallery-container"),
c=b.attr("data-asin");0<b.length&&c&&d(c,"reviews-image-gallery",b.find(".a-popover-trigger"),b.find(".review-image-tile"),b.find("#reviews-image-gallery-link"))});return{bindReview:function(b,c,d){var q=new ReviewGallery(d,"DESKTOP");q.initializeForReview(b);var n=a("#"+c);n.find(".review-image-tile").each(function(b){a(this).click(function(){n.find(".a-popover-trigger").click();g.when("reviewsLightbox-ready-"+d).execute(function(){q.render();q.showImageAtIndex(b)})})})},initializeForAsin:d}});
g.when("A","jQuery","cr-video-model","cr-video-view","reviews-constants").register("cr-video-controller",function(b,a,c,d,e){function h(){b.each(a(".review-views .review"),function(a,b){if(a&&a.id){var e=c.getEmbedInfo(a.id);e&&d.embedVideo(e)}})}b.on(e.events.RELOAD_COMPLETE,function(){h()});h();return{initAll:h}});g.when("jQuery").register("cr-video-model",function(b){return{getEmbedInfo:function(a){var c="video-block-"+a,d=b("#"+a+" .video-url").val(),e=b("#"+a+" .video-slate-img-url").val(),
h=b("#cr-video-swf-url").val();return a&&d&&h?{videoDomId:c,videoUrl:d,videoSlateImgUrl:e,videoSwfUrl:h}:!1}}});g.when("jQuery","afterLoad").register("cr-video-view",function(b){g.now("Airy").execute(function(a){var c=b("#cr-airy-js-source-url").val(),d=b("#cr-airy-css-source-url").val();a||"string"!==typeof c||"string"!==typeof d||(g.load.js(c),g.load.css(d))});return{embedVideo:function(a){g.when("Airy").execute(function(b){b.embed({parentId:a.videoDomId,streamingUrls:[a.videoUrl],
slateImages:{preloadSlate:a.videoSlateImgUrl},swfUrl:a.videoSwfUrl,desiredMode:"html"})})}}})});