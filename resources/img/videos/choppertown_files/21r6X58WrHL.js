(function(g){var k=window.AmazonUIPageJS||window.P,m=k._namespace||k.attributeErrors,e=m?m("DigitalVideoWebPlayerIntegration"):k;e.guardFatal?e.guardFatal(g)(e,window):e.execute(function(){g(e,window)})})(function(g,k,m){g.when("logging","dv-web-player-cfg").register("dv-player-load-src",function(e,d){var b=d.get("source"),f=e.create("dv-player-src"),n=function(b,e){var d=document.createElement("script");d.type="text/javascript";d.crossOrigin="anonymous";d.readyState?d.onreadystatechange=function(){if("loaded"===
d.readyState||"complete"===d.readyState)d.onreadystatechange=null,e()}:d.onload=function(){e()};d.src=b;d.onerror=h;d.async=!0;f.debug("loading web player source",b,d);document.getElementsByTagName("head")[0].appendChild(d)},h=function(){f.error("Webplayer load failed")};b&&n(b,function(){k.WebPlayer&&"function"===typeof k.WebPlayer?(f.debug("Webplayer Loaded succesfully",k.WebPlayer),g.register("dv-player-ready",function(){return new k.WebPlayer})):h()});return{ready:function(b){g.when("dv-player-ready").execute(b)}}});
"use strict";g.when("promise-polyfill","dv-player-load-src","dv-web-player-cfg","dv-player-default-view","dv-registry","dv-web-player-capabilities","logging").register("dv-player-integration",function(e,d,b,f,n,h,k){function g(){var a=b.get("playerConfig");return{customerId:a.customerId,domElement:document.getElementById(a.domElementId),marketplaceId:a.marketplaceId,sessionId:a.sessionId,locale:a.locale}}function p(){return["initialized","closed","playing","pinRequired"]}function m(a){d.ready(function(c){c.on(a,
function(){l(a)})})}function l(a,b){c.debug("action called",a,b);for(var f=q.query(a),h=[],g=function(){d.ready(function(a){"function"===typeof b&&b(a)})},n=function(){c.debug("Promise failed",a,b)},k=0;k<f.length;k++){var l=f[k](u.getLastTitle());l&&"object"===typeof l&&"function"===typeof l.then&&h.push(l)}c.debug("callbacks registered for",a,h);h.length?1===h.length?e.resolve(h[0]).then(g,n):e.all(h).then(g,n):g()}function r(b){var f=b&&b.ref,h=function(c){c.play(g(),a(b),{clickstreamRefMarker:f})};
c.debug("play called",b);d.ready(function(){l("play",h)})}function a(a){a=a||{};var c={trailer:a.trailer||!1,position:a.position||0,videoType:a.videoType};a.lcid?(c.asin=a.lcid,c.live=!0):a.asin&&(c.asin=a.asin);return c}var c=k.create("dv-player-integration"),q=n(),u=function(){var a=[];return{addTitle:function(c){a.push(c)},getLastTitle:function(){return a.slice(-1)[0]}}}();d.ready(function(d){d.initialize(g());c.debug("Initialized with",g());for(var h=0,e=p().length;h<e;h++)m(p()[h]);d.on("asinChanged",
function(c){l("asinChanged",function(){u.addTitle(a(c))})});b.get("useDefaultView")?q.add("play",f.open).add("closed",f.close):c.debug("Custom view requested - defaults not registered")});return{on:q.add,runBeforePlay:function(a){q.add("beforePlay",a)},onCapabilities:h,prepare:function(b){var h=function(c){c.prepare(g(),a(b))};c.debug("prepare called",b);d.ready(function(){l("prepare",h)})},play:function(c){c&&u.addTitle(a(c));l("beforePlay",function(){r(c)})},stop:function(){c.debug("stop called");
l("stop",function(a){a.initialize(g());l("closed")})}}});"use strict";g.register("dv-player-default-view",function(){return{open:function(){document.getElementById("dv-web-player").className="dv-player-fullscreen";document.getElementsByTagName("body")[0].style.overflow="hidden"},close:function(){document.getElementById("dv-web-player").className="";document.getElementsByTagName("body")[0].style.overflow="visible"}}});"use strict";g.when("dv-player-load-src","dv-player-integration","logging").register("dv-web-player-csm",
function(e,d,b){var f,g=b.create("dv-player-src");return function(b){e.ready(function(){g.info("CSM! whenInitialized",b);"function"===typeof k.uex&&k.uex("ld","web-player-src",{wb:1});"function"===typeof k.uet&&k.uet("cf",b,{wb:1})});d.on("pinRequired",function(){g.info("CSM! pinRequired",b);f=!0});d.on("playing",function(){f||(f=!0,g.info("CSM! first-frame",b),"function"===typeof k.uex&&k.uex("ld",b,{wb:1}))})}});"use strict";g.when("dv-web-player-cfg","dv-player-integration","dv-player-default-view").execute(function(e,
d){!e.get("autoplay")&&e.get("videoConfig")&&d.prepare(e.get("videoConfig"))});"use strict";g.when("logging").register("dv-registry",function(e){var d=e.create("dv-registry");return function(){var b={};return{add:function(f,e){if(f&&"function"===typeof e)return d.debug("Updated registry",f,e,b),b[f]=b[f]||[],b[f].push(e),this;d.error("Unable to register fn",f,e)},query:function(d){return b[d]||[]}}}});"use strict";g.register("promise-polyfill",function(){function e(){}function d(a,c){return function(){a.apply(c,
arguments)}}function b(a){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof a)throw new TypeError("not a function");this._state=0;this._handled=!1;this._value=void 0;this._deferreds=[];p(a,this)}function f(a,c){for(;3===a._state;)a=a._value;0===a._state?a._deferreds.push(c):(a._handled=!0,l(function(){var b=1===a._state?c.onFulfilled:c.onRejected;if(null===b)(1===a._state?g:h)(c.promise,a._value);else{var d;try{d=b(a._value)}catch(e){h(c.promise,
e);return}g(c.promise,d)}}))}function g(a,c){try{if(c===a)throw new TypeError("A promise cannot be resolved with itself.");if(c&&("object"===typeof c||"function"===typeof c)){var e=c.then;if(c instanceof b){a._state=3;a._value=c;t(a);return}if("function"===typeof e){p(d(e,c),a);return}}a._state=1;a._value=c;t(a)}catch(f){h(a,f)}}function h(a,c){a._state=2;a._value=c;t(a)}function t(a){2===a._state&&0===a._deferreds.length&&l(function(){a._handled||r(a._value)});for(var c=0,b=a._deferreds.length;c<
b;c++)f(a,a._deferreds[c]);a._deferreds=null}function m(a,c,b){this.onFulfilled="function"===typeof a?a:null;this.onRejected="function"===typeof c?c:null;this.promise=b}function p(a,c){var b=!1;try{a(function(a){b||(b=!0,g(c,a))},function(a){b||(b=!0,h(c,a))})}catch(d){b||(b=!0,h(c,d))}}if("function"===typeof k.Promise)return k.Promise;var v=setTimeout,l="function"===typeof setImmediate&&setImmediate||function(a){v(a,0)},r=function(a){"undefined"!==typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",
a)};b.prototype["catch"]=function(a){return this.then(null,a)};b.prototype.then=function(a,b){var d=new this.constructor(e);f(this,new m(a,b,d));return d};b.all=function(a){var c=Array.prototype.slice.call(a);return new b(function(a,b){function d(f,h){try{if(h&&("object"===typeof h||"function"===typeof h)){var g=h.then;if("function"===typeof g){g.call(h,function(a){d(f,a)},b);return}}c[f]=h;0===--e&&a(c)}catch(k){b(k)}}if(0===c.length)return a([]);for(var e=c.length,f=0;f<c.length;f++)d(f,c[f])})};
b.resolve=function(a){return a&&"object"===typeof a&&a.constructor===b?a:new b(function(b){b(a)})};b.reject=function(a){return new b(function(b,d){d(a)})};b.race=function(a){return new b(function(b,d){for(var f=0,e=a.length;f<e;f++)a[f].then(b,d)})};b._setImmediateFn=function(a){l=a};b._setUnhandledRejectionFn=function(a){r=a};return b});"use strict";g.when("dv-player-load-src").register("dv-web-player-capabilities",function(e){function d(b){e.ready(function(d){d.on("playerCapabilities",b)})}var b;
d(function(d){b=d});return function(e){"undefined"!==typeof b?e(b):d(e)}});"use strict";g.when("dv-player-integration","promise-polyfill").register("dv-live-incompatable",function(e,d){return function(b){function f(b){return function(d,f){if("Live"===b.videoType||b.lcid||b.live)e.onCapabilities(g(d,f));else d()}}function g(d,e){return function(f){!1===f.capabilities.supportsLive?(b(),e()):d()}}e.runBeforePlay(function(b){return new d(f(b))})}})});