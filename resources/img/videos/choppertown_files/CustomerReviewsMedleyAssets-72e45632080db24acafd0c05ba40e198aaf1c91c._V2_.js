(function(g){var p=window.AmazonUIPageJS||window.P,t=p._namespace||p.attributeErrors,b=t?t("CustomerReviewsMedleyAssets"):p;b.guardFatal?b.guardFatal(g)(b,window):b.execute(function(){g(b,window)})})(function(g,p,t){g.when("A","medley-view","medley-model","ready").register("medley-controller",function(b,a,c){function d(b){b=c.getASIN();var d=a.getDisplayedASIN();d&&b!==d&&(a.fadeReviews(!0),c.getReviews(d,function(){c.setASIN(d)},function(){},function(){a.fadeReviews(!1)}))}var e=a.getLoadedASIN();
c.setASIN(e);b.on("a:pageUpdate",d);return{onTwist:d}});g.when("A","jQuery").register("medley-view",function(b,a){return{getDisplayedASIN:function(){return String(a("#ASIN").val()||"")},getLoadedASIN:function(){return(b.$("#cr-state-object").data("state")||{}).asin||""},fadeReviews:function(b){!1===b?a("#cm-cr-review-list .review,#most-recent-reviews-content .review").css("opacity",1):a("#cm-cr-review-list .review,#most-recent-reviews-content .review").css("opacity",.5)}}});
g.when("A","cr-global-model","cr-ajax-model").register("medley-model",function(b,a,c){function d(a){var b=e(p.location.href)||{};b.asin=a;return b}function e(a){a=a||"";var c={},d=a.indexOf("?"),e=a.indexOf("#");a=a.slice(d+1,e>d?e:t)||"";d=[];-1<a.indexOf("&")?d=a.split("&"):-1<a.indexOf("=")&&(d=[a]);b.each(d,function(a,b){if(0<a.indexOf("=")){var d=a.split("=");c[d[0]]=d[1]}});return c}var h;return{setASIN:function(a){h=a||""},getASIN:function(){return h},getReviews:function(a,b,e,h){"string"===
typeof a&&10===a.length?c.post("/ss/customer-reviews/ajax/medley-reviews/get/",{params:d(a),attribution:"getMedleyReviews",success:b,error:e,finallyCallback:h}):"function"===typeof h&&h()},getUrlVars:e,enhanceReviews:function(a){"string"===typeof a&&10===a.length&&c.post("/ss/customer-reviews/ajax/medley-reviews/enhance/",{params:d(a),attribution:"enhanceMedleyReviews"})}}});g.when("A","review-skyfall-view","review-skyfall-model","reviews-constants","cr-global-view","a-button","cr-log-utils").register("review-skyfall-controller",
function(b,a,c,d,e,h,f){function g(a){a=e.getReftag(a);c.clickMetric(a,function(){})}function n(b,d){a.showMoreFeedbackSection(b.$target.closest(".feedback-section"));var f=e.getReftag(b);c.clickMetric(f,function(a){d.disable()})}b.declarative(d.events.FEEDBACK_CLICK,"click",function(a){var b=h(".cr-feedback-helpful-yes, .cr-feedback-helpful-no");n(a,b)});b.declarative(d.events.CLIQUE_CLICK,"click",g);b.on("a:expander:clique-ratings-read-more:toggle:expand",function(a){f.incrementCount("skyfallReadMore")});
b.on("a:popover:show:skyfallWhatsThis",function(a){f.incrementCount("skyfallWhatsThis")});return{feedbackClick:n,cliqueClick:g}});g.when("A","cr-ajax-model","cr-global-model").register("review-skyfall-model",function(b,a,c){return{clickMetric:function(b,e){var h=c.generateUrl("/ss/customer-reviews/ajax/reftag-trigger",b);a.post(h,{params:{},success:e})}}});g.when("A","reviews-constants").register("review-skyfall-view",function(b,a){return{showMoreFeedbackSection:function(b){b.find(".more-feedback-section").removeClass(a.aui.HIDDEN);
b.find(".is-feature-helpful-row").addClass(a.aui.HIDDEN)}}})});